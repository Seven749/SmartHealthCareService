# 智慧-医疗系统接口文档V1.1.2

```JAVA
baseUrl = "http://www.sruml.cn:8085/api";
```



## 1 用户账户管理

### 1.1 登录

```JAVA
String addUrl =  "/user_login";
```

请求参数示例：

tel：13312341234

pwd：1234 



成功时返回的JSON数据：

```JSON
{
    "success": true,
    "code": 20000,
    "message": "成功",
    "data": {
        "loginUser": {
            "user_id": 1,
            "name": "张三",
            "pwd": "1234",
            "sex": "男",
            "birthday": "1990-03-04",
            "tel": "13312341234",
            "count": 0,
            "create_time": "2020-06-08 15:32",
            "balance": 0.0,
            "idcard": "500123199003041234"
        }
    }
}
```

---

### 1.2 注册

```JAVA
String addUrl = "/user_register"
```

请求参数示例：

 name：王麻子

pwd：123456

IDCard：500123199005061234 （18位，记得修改，不能重复）

tel：13334541234 （11位，记得修改，不能重复）



成功时返回的JSON数据：

```JSON
{
    "success": true,
    "code": 20000,
    "message": "成功",
    "data": {
        "registerUser": {
            "user_id": 12,
            "name": "王麻子",
            "pwd": "123456",
            "sex": "男",
            "birthday": "1990-05-06",
            "tel": "13334541234",
            "count": 0,
            "create_time": "2022-06-13 08:44:56",
            "balance": 0.0,
            "idcard": "500123199005061234"
        }
    }
}
```

---



### 1.3 找回密码

```JAVA
String addUrl = "/user_find_pwd"
```

请求参数示例：

IDCard：500123199005061234 （18位）

tel：13334541234 （11位）

pwd：12345678（新密码）



成功时返回的JSON数据：

```JSON
{
    "success": true,
    "code": 20000,
    "message": "成功",
    "data": {
        "user": {
            "user_id": 12,
            "name": "王麻子",
            "pwd": "12345678",
            "sex": "男",
            "birthday": "1990-05-06",
            "tel": "13334541234",
            "count": 0,
            "create_time": "2022-06-13 08:44:56",
            "balance": 0.0,
            "idcard": "500123199005061234"
        }
    }
}
```

---



## 2 医护账户管理

### 2.1 医生登录

```JAVA
String addUrl = "/doc_login"
```

请求参数示例：

 doc_id：doc_0001

pwd：1234 



成功时返回的JSON数据：

```JSON
{
    "success": true,
    "code": 20000,
    "message": "成功",
    "data": {
        "login_doctor": {
            "doc_id": "doc_0001",
            "name": "王医生",
            "pwd": "1234",
            "avatar": null,
            "dept_id": 1,
            "create_time": "2022-06-09 10:58",
            "price": 8.0
        }
    }
}
```

---



### 2.2 护士登录

```JAVA
String addUrl = "/nur_login"
```

请求参数示例：

nur_id：nur_0001

pwd：1234 



成功时返回的JSON数据：

```JSON
{
    "success": true,
    "code": 20000,
    "message": "成功",
    "data": {
        "login_nurse": {
            "nur_id": "nur_0001",
            "name": "张护士",
            "pwd": "1234",
            "avatar": null,
            "dept_id": 1,
            "create_time": "2022-06-09 10:59"
        }
    }
}
```

---



## 3 挂号服务

### 3.1 挂号

```JAVA
String addUrl = "/create_registration";
```

请求参数示例：

user_name：王五

IDCard：500123199103041243

dept_id：1

doc_id：doc_0001

date：2022-06-15

time：15:00 

成功时返回参数：

```JSON
{
    "success": true,
    "code": 20000,
    "message": "成功",
    "data": {
        "registration": {
            "record_id": "doc_00012022061531",
            "user_id": 2,
            "user_name": "王五",
            "doc_id": "doc_0001",
            "doc_name": "王医生",
            "dept_id": 1,
            "dept_name": "测试科室",
            "num": 31,
            "price": 8.0,
            "date": "2022-06-15",
            "time": "15:00",
            "create_time": "2022-06-14 10:20:11"
        }
    }
}
```

---



### 3.2 查询挂号记录

```JAVA
String addUrl = "/get_registration_list";
```

请求参数示例：

user_id：1

成功时返回参数：

```JSON
{
    "success": true,
    "code": 20000,
    "message": "成功",
    "data": {
        "registrationList": [
            {
                "record_id": "doc_0012022060930",
                "user_id": 1,
                "user_name": "张三",
                "doc_id": "doc_0001",
                "doc_name": "王医生",
                "dept_id": 1,
                "dept_name": "测试科室",
                "num": 30,
                "price": 8.0,
                "date": "2022-06-09",
                "time": "14:50",
                "create_time": "2022-06-08 17:20"
            },
            {
                "record_id": "doc_0012022060929",
                "user_id": 1,
                "user_name": "张三",
                "doc_id": "doc_0001",
                "doc_name": "王医生",
                "dept_id": 1,
                "dept_name": "测试科室",
                "num": 29,
                "price": 8.0,
                "date": "2022-06-09",
                "time": "14:40",
                "create_time": "2022-06-08 17:20"
            },
            {
                "record_id": "doc_0012022060928",
                "user_id": 1,
                "user_name": "张三",
                "doc_id": "doc_0001",
                "doc_name": "王医生",
                "dept_id": 1,
                "dept_name": "测试科室",
                "num": 28,
                "price": 8.0,
                "date": "2022-06-09",
                "time": "14:30",
                "create_time": "2022-06-08 17:20"
            },
            {
                "record_id": "doc_0012022060927",
                "user_id": 1,
                "user_name": "张三",
                "doc_id": "doc_0001",
                "doc_name": "王医生",
                "dept_id": 1,
                "dept_name": "测试科室",
                "num": 27,
                "price": 8.0,
                "date": "2022-06-09",
                "time": "14:20",
                "create_time": "2022-06-08 17:20"
            },
            {
                "record_id": "doc_0012022060926",
                "user_id": 1,
                "user_name": "张三",
                "doc_id": "doc_0001",
                "doc_name": "王医生",
                "dept_id": 1,
                "dept_name": "测试科室",
                "num": 26,
                "price": 8.0,
                "date": "2022-06-09",
                "time": "14:10",
                "create_time": "2022-06-08 17:20"
            }
        ]
    }
}
```

---



## 4 病历服务

### 4.1 新建病历

新建病历一共有3部：新建病历、新建处方、新建检查单

#### 4.1.1 新建病历

```JAVA
String addUrl = "/create_histories";
```

请求参数示例：

user_id：1

doc_id：doc_0001

dept_id：1

allergies：测试过敏史

present：测试现状史

past：测试既往史

physical_exam：测试体格检查

assistant_exam：测试辅助检查

diagnosis：测试诊断

advice：测试建议

prescription_count：2

check_item_count：2 

成功时返回参数：

```JSON
{
    "success": true,
    "code": 20000,
    "message": "成功",
    "data": {
        "histories": {
            "histories_id": "his2206141",
            "user_id": 1,
            "user_name": "张三",
            "doc_id": "doc_0001",
            "doc_name": "王医生",
            "dept_id": 1,
            "dept_name": "测试科室",
            "allergies": "测试过敏史",
            "present": "测试现状史",
            "past": "测试既往史",
            "physical_exam": "测试体格检查",
            "assistant_exam": "测试辅助检查",
            "diagnosis": "测试诊断",
            "advice": "测试建议",
            "create_time": "2022-06-14 08:11:57",
            "prescription_count": 2,
            "check_item_count": 2,
            "prescriptionList": null,
            "checkItemList": null
        }
    }
}
```

---



#### 4.1.2 新建处方

```JAVA
String addUrl = "/create_prescription";
```

请求参数示例：

histories_id：his220614081

drug_id：drug002

drug_count：3

usages：1次2颗 1日3次 口服 

成功时返回参数：

```JSON
{
    "success": true,
    "code": 20000,
    "message": "成功",
    "data": {
        "prescription": {
            "prescription_id": "pre22061411315",
            "histories_id": "his220614081",
            "drug_id": "drug002",
            "drug_name": "测试药品1",
            "drug_count": 3,
            "usages": "1次2颗 1日3次 口服",
            "create_time": "2022-06-14 09:13:15"
        },
        "drugBill": {
            "drug_bill_id": "dbi22061411315",
            "prescription_id": "pre22061411315",
            "histories_id": "his220614081",
            "user_id": 1,
            "user_name": "张三",
            "drug_id": "drug002",
            "drug_name": "测试药品1",
            "price": 15.0,
            "drug_count": 3,
            "total": 45.0,
            "count": 0,
            "isPay": "No"
        }
    }
}
```

---



#### 4.1.3 新建检查单

```JAVA
String addUrl = "/create_check_item";
```

请求参数示例：

histories_id：his220614081

item_id：item002

item_count：1

成功时返回参数：

```JSON
{
    "success": true,
    "code": 20000,
    "message": "成功",
    "data": {
        "checkItem": {
            "check_item_id": "check22061415732",
            "histories_id": "his220614081",
            "item_id": "item002",
            "item_name": "测试项目2",
            "item_count": 1,
            "create_time": "2022-06-14 09:57:32"
        },
        "itemBill": {
            "item_bill_id": "cbi22061415732",
            "check_item_id": "check22061415732",
            "histories_id": "his220614081",
            "user_id": 1,
            "user_name": "张三",
            "item_id": "item002",
            "item_name": "测试项目2",
            "price": 140.0,
            "item_count": 1,
            "total": 140.0,
            "count": 0,
            "isPay": "No"
        }
    }
}
```

---



### 4.2 查询病历列表

```JAVA
String addUrl = "/get_histories_list";
```

请求参数示例：

user_id：1 

成功时返回参数：

```JSON
{
    "success": true,
    "code": 20000,
    "message": "成功",
    "data": {
        "historiesList": [
            {
                "histories_id": "his220614101",
                "user_id": 1,
                "user_name": "张三",
                "count": 0,
                "doc_id": "doc_0001",
                "doc_name": "王医生",
                "dept_id": 1,
                "dept_name": "测试科室",
                "allergies": "测试过敏史2",
                "present": "测试现状史2",
                "past": "测试既往史2",
                "physical_exam": "测试体格检查2",
                "assistant_exam": "测试辅助检查2",
                "diagnosis": "测试诊断2",
                "advice": "测试建议2",
                "create_time": "2022-06-14 10:54:08",
                "prescription_count": 0,
                "check_item_count": 0,
                "prescriptionList": null,
                "checkItemList": null
            },
            {
                "histories_id": "his220614081",
                "user_id": 1,
                "user_name": "张三",
                "count": 0,
                "doc_id": "doc_0001",
                "doc_name": "王医生",
                "dept_id": 1,
                "dept_name": "测试科室",
                "allergies": "测试过敏史",
                "present": "测试现状史",
                "past": "测试既往史",
                "physical_exam": "测试体格检查",
                "assistant_exam": "测试辅助检查",
                "diagnosis": "测试诊断",
                "advice": "测试建议",
                "create_time": "2022-06-14 08:11:57",
                "prescription_count": 2,
                "check_item_count": 2,
                "prescriptionList": null,
                "checkItemList": null
            }
        ]
    }
}
```

---

### 4.3 查询病历详情

```JAVA
String addUrl = "/get_histories";
```

请求参数示例：

histories_id：his220614081 

成功时返回参数：

```JSON
{
    "success": true,
    "code": 20000,
    "message": "成功",
    "data": {
        "histories": {
            "histories_id": "his220614081",
            "user_id": 1,
            "user_name": "张三",
            "count": 0,
            "doc_id": "doc_0001",
            "doc_name": "王医生",
            "dept_id": 1,
            "dept_name": "测试科室",
            "allergies": "测试过敏史",
            "present": "测试现状史",
            "past": "测试既往史",
            "physical_exam": "测试体格检查",
            "assistant_exam": "测试辅助检查",
            "diagnosis": "测试诊断",
            "advice": "测试建议",
            "create_time": "2022-06-14 08:11:57",
            "prescription_count": 2,
            "check_item_count": 2,
            "prescriptionList": [
                {
                    "prescription_id": "pre22061411315",
                    "histories_id": "his220614081",
                    "drug_id": "drug002",
                    "drug_name": "测试药品1",
                    "drug_count": 3,
                    "usages": "1次2颗 1日3次 口服",
                    "create_time": "2022-06-14 09:13:15"
                },
                {
                    "prescription_id": "pre22061415724",
                    "histories_id": "his220614081",
                    "drug_id": "drug001",
                    "drug_name": "阿莫西林",
                    "drug_count": 3,
                    "usages": "1次2颗 1日3次 口服",
                    "create_time": "2022-06-14 08:57:24"
                }
            ],
            "checkItemList": [
                {
                    "check_item_id": "check22061415720",
                    "histories_id": "his220614081",
                    "item_id": "item001",
                    "item_name": "测试项目1",
                    "item_count": 1,
                    "create_time": "2022-06-14 09:57:20"
                },
                {
                    "check_item_id": "check22061415732",
                    "histories_id": "his220614081",
                    "item_id": "item002",
                    "item_name": "测试项目2",
                    "item_count": 1,
                    "create_time": "2022-06-14 09:57:32"
                }
            ]
        }
    }
}
```

---

